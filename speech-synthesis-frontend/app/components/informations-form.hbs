{{!-- informations-form.hbs --}}
        <img class="trash-icon" src="assets/trash_image.png" {{on "click" this.openModale}}/>

<div class="informations-form">
    <h2 class="form-title">INFORMATIONS</h2>
    
    <form class="form-container" {{on "submit" this.submitForm}}>
        <div class="input-group">
            <input 
                type="text" 
                class="form-input" 
                placeholder="Nom"
                value={{this.lastName}}
                {{on "input" this.updateLastName}}
            >
        </div>
        
        <div class="input-group">
            <input 
                type="text" 
                class="form-input" 
                placeholder="Prénom"
                value={{this.firstName}}
                {{on "input" this.updateFirstName}}
            >
        </div>
        
        <div class="input-group">
            <input 
                type="email" 
                class="form-input" 
                placeholder="Adresse mail"
                value={{this.mail}}
                {{on "input" this.updateMail}}
            >
        </div>
        
        <div class="input-group">
            <input 
                type="text" 
                class="form-input date-input" 
                placeholder="Date de naissance (JJ/MM/AAAA)"
                maxlength="10"
                value={{this.dob}}
                {{on "input" this.updateDob}}
                {{on "blur" this.validateDob}}
                {{on "keypress" this.handleKeyPress}}
            >
        </div>
        
        <button type="submit" class="submit-button">
            {{#if this.aiAgents.isLoading}}
                <div class="loading-spinner">
                    <div class="spinner"></div>
                </div>           
                 {{else}}
                Obtenir le résumé
            {{/if}}
        </button>
    </form>
    
</div>
    <script>
          document.querySelector('.date-input').addEventListener('input', function(e) {
            let value = e.target.value.replace(/\D/g, ''); // Supprimer tout ce qui n'est pas un chiffre
            
            // Limiter à 8 chiffres maximum
            if (value.length > 8) {
                value = value.substring(0, 8);
            }
            
            // Ajouter les barres obliques automatiquement
            if (value.length >= 2) {
                value = value.substring(0, 2) + '/' + value.substring(2);
            }
            if (value.length >= 5) {
                value = value.substring(0, 5) + '/' + value.substring(5);
            }
            
            e.target.value = value;
        });

        // Validation simple de la date
        document.querySelector('.date-input').addEventListener('blur', function(e) {
            const dateValue = e.target.value;
            const dateRegex = /^(\d{2})\/(\d{2})\/(\d{4})$/;
            
            if (dateValue && !dateRegex.test(dateValue)) {
                e.target.style.borderColor = '#ff4444';
                e.target.style.boxShadow = '0 2px 10px rgba(255, 68, 68, 0.2)';
            } else {
                e.target.style.borderColor = '';
                e.target.style.boxShadow = '';
            }
        });

        // Permettre seulement les chiffres et les barres obliques
        document.querySelector('.date-input').addEventListener('keypress', function(e) {
            const char = String.fromCharCode(e.which);
            if (!/[\d\/]/.test(char)) {
                e.preventDefault();
            }
        });
    </script>